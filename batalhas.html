<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <script type="text/javascript">
        (function(c,l,a,r,i,t,y){
            c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
            t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i;
            y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
        })(window, document, "clarity", "script", "t0i3kd02k6");
    </script>
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-EJDQYDNW2T"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-EJDQYDNW2T');
    </script>
    
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Batalhas - Coalizão 016</title>
    
    <link rel="stylesheet" href="styles.css" />

    <style>
        /* Estilos específicos desta página */
        .batalhas-container { max-width: 1200px; margin: 0 auto; padding: 20px; text-align: center; }
        .form-container { max-width: 600px; margin: 40px auto; background: #282828; padding: 30px; border-radius: 10px; border: 1px solid #333; }
        .form-container p { color: #e0e0e0; text-align: center; line-height: 1.6; }
        .filters { display: flex; justify-content: center; gap: 20px; margin-bottom: 20px; flex-wrap: wrap; background: #282828; padding: 20px; border-radius: 10px; max-width: 800px; margin: 30px auto; }
        .filters select, .filters button { padding: 10px; border-radius: 5px; border: 1px solid #444; background-color: #333; color: #e0e0e0; font-size: 1em; cursor: pointer; }
        .filters button { background-color: #ff8c00; color: #fff; font-weight: bold; border: none; }
        .batalhas-grid { display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; justify-items: center; }
        .batalha-card { background-color: #282828; border-radius: 10px; padding: 25px; box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4); transition: transform 0.3s ease; width: 100%; box-sizing: border-box; display: flex; flex-direction: column; align-items: center; cursor: pointer; }
        .batalha-card:hover { transform: translateY(-5px); }
        .batalha-card img { width: 100px; height: 100px; object-fit: cover; border-radius: 10px; margin-bottom: 15px; }
        .batalha-card h3 { color: #ff8c00; margin: 0 0 10px 0; font-size: 1.5em; }
        .batalha-card p { margin: 5px 0; color: #b0b0b0; }
        
        /* Estilos da Modal */
        .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8); padding-top: 60px; }
        .modal-content { background-color: #282828; margin: 5% auto; padding: 30px; border: 1px solid #444; width: 80%; max-width: 600px; border-radius: 10px; position: relative; animation-name: animatetop; animation-duration: 0.4s; }
        .modal-content h3 { color: #ff8c00; font-size: 2em; text-align: center; }
        .modal-content p { color: #e0e0e0; text-align: left; margin-bottom: 10px; }
        .modal-content .links-redes { margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
        .modal-content .links-redes a { padding: 8px 15px; background-color: #ff8c00; color: #fff; text-decoration: none; border-radius: 5px; font-weight: bold; transition: background-color 0.3s; }
        .modal-content .links-redes a:hover { background-color: #e67300; }
        .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s; }
        .close-btn:hover { color: #fff; }
        @keyframes animatetop { from {top:-300px; opacity:0} to {top:0; opacity:1} }
    </style>
</head>
<body>
    <header>
    </header>
    
    <nav>
        <div class="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <div class="nav-links">
            <a href="index.html">Início</a>
            <a href="batalhas.html"><strong>Batalhas</strong></a>
            <a href="mcs.html">MC's</a>
            <a href="mapaindex.html">Mapa</a>
            <a href="ranking.html">Ranking</a>
            <div class="dropdown">
                <a href="#" class="dropdown-label">Nossas Redes</a>
                <div class="dropdown-content">
                    <a href="https://www.instagram.com/coalizao016/" target="_blank">Instagram</a>
                    <a href="https://www.tiktok.com/@coalizao016?lang=pt-BR" target="_blank">TikTok</a>
                    <a href="https://www.youtube.com/@Coaliz%C3%A3o016" target="_blank">YouTube</a>
                    <a href="https://linktr.ee/coalizao016" target="_blank">Fotos</a>
                </div>
            </div>
        </div>
    </nav>

    <div class="batalhas-container">
        <h1>Todas as Batalhas da Liga</h1>
        
        <div class="form-container">
            <h2>Inscrições da Temporada Encerradas</h2>
            <p>O cadastro de novas batalhas para a temporada 2025.2 da Liga Caipira foi encerrado. Fique de olho em nossas redes sociais para a abertura da próxima temporada!</p>
        </div>

        <p style="color: #b0b0b0;">Clique em um card para ver mais detalhes da batalha.</p>
        <div class="filters">
            <select id="filtro-dia"><option value="">Filtrar por Dia</option></select>
            <select id="filtro-cidade"><option value="">Filtrar por Cidade</option></select>
            <button id="limpar-filtros">Limpar Filtros</button>
        </div>
        <div class="batalhas-grid" id="batalhas-grid"></div>
    </div>

    <footer>© 2025 Coalizão 016 - Todos os direitos reservados.</footer>

    <div id="batalha-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="modal-body"></div>
        </div>
    </div>

    <script src="batalhas.js"></script>
    <script>
        // Script principal da página
        document.addEventListener('DOMContentLoaded', () => {
            const batalhasGrid = document.getElementById('batalhas-grid');
            const filtroDia = document.getElementById('filtro-dia');
            const filtroCidade = document.getElementById('filtro-cidade');
            const limparFiltrosBtn = document.getElementById('limpar-filtros');
            const batalhaModal = document.getElementById('batalha-modal');
            const modalBody = document.getElementById('modal-body');
            const closeBtn = document.querySelector('.close-btn');

            function renderizarBatalhas(batalhasParaRenderizar) {
                batalhasGrid.innerHTML = '';
                if (batalhasParaRenderizar.length > 0) {
                    batalhasParaRenderizar.forEach(batalha => {
                        const card = document.createElement('div');
                        card.className = 'batalha-card';
                        card.setAttribute('data-codigo', batalha.codigo);
                        const logoPath = `images/${batalha.codigo}.png`;
                        const imgElement = `<img src="${logoPath}" alt="Logo ${batalha.nome}" onerror="this.onerror=null; this.src='images/placeholder.png';">`;
                        card.innerHTML = `${imgElement}<h3>${batalha.nome}</h3><p><strong>Cidade:</strong> ${batalha.cidade}</p><p><strong>Dia:</strong> ${batalha.dia}</p>`;
                        batalhasGrid.appendChild(card);
                    });
                } else {
                    batalhasGrid.innerHTML = '<p style="color: #b0b0b0;">Nenhuma batalha encontrada com os filtros selecionados.</p>';
                }
            }

            function popularFiltros() {
                const diasUnicos = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
                const cidadesUnicas = [...new Set(batalhas.map(batalha => batalha.cidade))].sort();
                diasUnicos.forEach(dia => {
                    const option = document.createElement('option');
                    option.value = dia; option.textContent = dia; filtroDia.appendChild(option);
                });
                cidadesUnicas.forEach(cidade => {
                    const option = document.createElement('option');
                    option.value = cidade; option.textContent = cidade; filtroCidade.appendChild(option);
                });
            }

            function filtrarBatalhas() {
                const diaSelecionado = filtroDia.value;
                const cidadeSelecionada = filtroCidade.value;
                let batalhasFiltradas = batalhas.filter(batalha => {
                    const filtraPorDia = diaSelecionado === '' || batalha.dia.includes(diaSelecionado);
                    const filtraPorCidade = cidadeSelecionada === '' || batalha.cidade === cidadeSelecionada;
                    return filtraPorDia && filtraPorCidade;
                });
                batalhasFiltradas.sort((a, b) => a.nome.localeCompare(b.nome));
                renderizarBatalhas(batalhasFiltradas);
            }

            if (typeof batalhas !== 'undefined') {
                batalhas.sort((a, b) => a.nome.localeCompare(b.nome));
                popularFiltros();
                renderizarBatalhas(batalhas);

                batalhasGrid.addEventListener('click', (e) => {
                    const card = e.target.closest('.batalha-card');
                    if (card) {
                        const codigo = card.getAttribute('data-codigo');
                        const batalhaSelecionada = batalhas.find(b => b.codigo === codigo);
                        if (batalhaSelecionada) {
                            let campeoesHistoricosHTML = '';
                            if (batalhaSelecionada.campeoes_historicos && batalhaSelecionada.campeoes_historicos.length > 0 && batalhaSelecionada.campeoes_historicos[0]) {
                                campeoesHistoricosHTML = `<p><strong>Maiores Campeões:</strong> ${batalhaSelecionada.campeoes_historicos.join(', ')}</p>`;
                            }
                            let redesSociaisHTML = '';
                            if (batalhaSelecionada.redes_sociais_links && batalhaSelecionada.redes_sociais_links.length > 0) {
                                redesSociaisHTML = `<p style="text-align:center;"><strong>Redes Sociais:</strong></p><div class="links-redes">`;
                                batalhaSelecionada.redes_sociais_links.forEach(link => {
                                    redesSociaisHTML += `<a href="${link.url}" target="_blank">${link.nome}</a>`;
                                });
                                redesSociaisHTML += `</div>`;
                            }
                            modalBody.innerHTML = `<h3>${batalhaSelecionada.nome}</h3><p><strong>Cidade:</strong> ${batalhaSelecionada.cidade}</p><p><strong>Dia:</strong> ${batalhaSelecionada.dia}</p><p><strong>Descrição:</strong> ${batalhaSelecionada.descricao}</p>${campeoesHistoricosHTML}${redesSociaisHTML}`;
                            batalhaModal.style.display = 'block';
                        }
                    }
                });

                limparFiltrosBtn.addEventListener('click', () => { filtroDia.value = ''; filtroCidade.value = ''; filtrarBatalhas(); });
                filtroDia.addEventListener('change', filtrarBatalhas);
                filtroCidade.addEventListener('change', filtrarBatalhas);
                closeBtn.onclick = () => { batalhaModal.style.display = 'none'; };
                window.onclick = (event) => { if (event.target === batalhaModal) { batalhaModal.style.display = 'none'; } };
            } else {
                batalhasGrid.innerHTML = '<p style="color: #b0b0b0;">Não foi possível carregar os dados das batalhas.</p>';
            }
        });
    </script>

    <script>
        const hamburger = document.querySelector(".hamburger");
        const navLinks = document.querySelector(".nav-links");
        const dropdownLabel = document.querySelector(".dropdown-label");
        const dropdownContent = document.querySelector(".dropdown-content");

        if (hamburger && navLinks) {
            hamburger.addEventListener("click", () => {
                navLinks.classList.toggle("active");
            });
        }
        if (window.innerWidth <= 850 && dropdownLabel && dropdownContent) {
            dropdownLabel.addEventListener("click", (e) => {
                e.preventDefault();
                if (dropdownContent.style.display === "block") {
                    dropdownContent.style.display = "none";
                } else {
                    dropdownContent.style.display = "block";
                }
            });
        }
    </script>
</body>
</html>