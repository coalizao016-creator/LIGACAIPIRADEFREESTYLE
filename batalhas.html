<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Batalhas - Coalizão 016</title>
    <link rel="stylesheet" href="styles.css" />
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            padding: 0;
            background: #1a1a1a;
            color: #e0e0e0;
            text-align: center;
        }

        /* Estilos do cabeçalho com imagem de fundo */
        header {
            position: relative;
            height: 250px;
            overflow: hidden;
            margin-bottom: 20px;
        }
        header img {
            width:100%;
            height:100%;
            object-fit:cover;
            position:absolute;
            top:0;
            left:0;
            z-index:1;
        }
        header .degrade {
            position:absolute;
            top:0;
            left:0;
            width:100%;
            height:100%;
            background: linear-gradient(to bottom, rgba(0,0,0,0) 50%, rgba(0,0,0,0.85) 100%);
            z-index:2;
        }

        /* Estilos do menu */
        nav {
            background: #222;
            padding: 10px;
            display: flex;
            justify-content: center;
        }
        nav a {
            color: #fff;
            margin: 0 10px;
            text-decoration: none;
            font-weight: bold;
        }
        nav a:hover {
            color: #ff7f00;
        }

        /* Estilos do menu suspenso de redes sociais */
        .dropdown {
            position: relative;
            display: inline-block;
        }
        .dropdown-content {
            display: none;
            position: absolute;
            background-color: #222;
            min-width: 160px;
            box-shadow: 0px 8px 16px 0px rgba(0,0,0,0.4);
            z-index: 1;
            border-radius: 5px;
            padding: 12px;
            left: 50%;
            transform: translateX(-50%);
        }
        .dropdown-content a {
            color: white;
            padding: 8px 16px;
            text-decoration: none;
            display: block;
            text-align: left;
            white-space: nowrap;
        }
        .dropdown-content a:hover {
            background-color: #333;
            border-radius: 3px;
        }
        .dropdown:hover .dropdown-content {
            display: block;
        }
        .dropdown-label {
            cursor: pointer;
            color: #fff;
            font-weight: bold;
            text-decoration: none;
        }
        .dropdown-label:hover {
            color: #ff7f00;
        }

        /* Estilos dos filtros */
        .filters {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin-bottom: 20px;
            flex-wrap: wrap;
        }
        .filters select {
            padding: 10px;
            border-radius: 5px;
            border: 1px solid #444;
            background-color: #282828;
            color: #e0e0e0;
            cursor: pointer;
        }
        .filters button {
            padding: 10px 15px;
            border-radius: 5px;
            border: none;
            background-color: #ff8c00;
            color: #fff;
            cursor: pointer;
            font-weight: bold;
        }

        /* Estilos dos cards de batalhas */
        .batalhas-container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }
        h1, h2 {
            text-align: center;
            margin: 40px 0 20px;
            color: #ff8c00;
        }
        .batalhas-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            justify-items: center;
        }
        .batalha-card {
            background-color: #282828;
            border-radius: 10px;
            padding: 25px;
            text-align: left;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.4);
            transition: transform 0.3s ease;
            width: 100%;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
        }
        .batalha-card:hover {
            transform: translateY(-5px);
        }
        .batalha-card img {
            width: 80px;
            height: 80px;
            object-fit: contain;
            margin-bottom: 10px;
        }
        .batalha-card h3 {
            color: #ff8c00;
            margin: 0 0 10px 0;
            font-size: 1.5em;
            text-align: center;
        }
        .batalha-card p {
            margin: 5px 0;
            color: #b0b0b0;
            text-align: center;
        }
        .batalha-card .card-rede {
            display: inline-block;
            margin-top: 15px;
            padding: 10px 15px;
            background-color: #ff8c00;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s ease;
            align-self: center;
        }
        .batalha-card .card-rede:hover {
            background-color: #e67300;
        }
        
        /* Estilos da Modal (Popup) */
        .modal {
            display: none; /* Escondido por padrão */
            position: fixed;
            z-index: 100;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0,0,0,0.8); /* Fundo escuro transparente */
            padding-top: 60px;
        }
        .modal-content {
            background-color: #282828;
            margin: 5% auto;
            padding: 30px;
            border: 1px solid #444;
            width: 80%;
            max-width: 600px;
            border-radius: 10px;
            position: relative;
            animation-name: animatetop;
            animation-duration: 0.4s;
        }
        .modal-content h3 {
            color: #ff8c00;
            font-size: 2em;
        }
        .modal-content p {
            color: #e0e0e0;
            text-align: left;
            margin-bottom: 10px;
        }
        .modal-content .links-redes {
            margin-top: 20px;
            display: flex;
            flex-wrap: wrap;
            gap: 10px;
        }
        .modal-content .links-redes a {
            padding: 8px 15px;
            background-color: #ff8c00;
            color: #fff;
            text-decoration: none;
            border-radius: 5px;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        .modal-content .links-redes a:hover {
            background-color: #e67300;
        }
        .modal-content .close-btn {
            color: #aaa;
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s;
        }
        .modal-content .close-btn:hover {
            color: #fff;
        }
        
        /* Animação de entrada da modal */
        @keyframes animatetop {
            from {top:-300px; opacity:0} 
            to {top:0; opacity:1}
        }

        footer {
            background:#000;
            padding:15px;
            color:#aaa;
            text-align: center;
            margin-top: 30px;
        }
    </style>
</head>
<body>

    <header>
        <img src="batalha.jpg" alt="Batalha">
        <div class="degrade"></div>
    </header>

    <nav>
        <a href="index.html">Início</a>
        <a href="#agenda">Agenda</a>
        <a href="#ranking">Ranking</a>
        <a href="https://coalizao016-creator.github.io/NOVOMAPA/" target="_blank">Mapa</a>
        <a href="batalhas.html"><strong>Batalhas</strong></a>
        <a href="mcs.html">MC's</a>

        <div class="dropdown">
            <a href="#" class="dropdown-label">Nossas Redes</a>
            <div class="dropdown-content">
                <a href="https://www.instagram.com/coalizao016/" target="_blank">Instagram</a>
                <a href="https://www.tiktok.com/@coalizao016?lang=pt-BR" target="_blank">TikTok</a>
                <a href="https://www.youtube.com/@Coaliz%C3%A3o016" target="_blank">YouTube</a>
                <a href="https://linktr.ee/coalizao016" target="_blank">Fotos</a>
            </div>
        </div>
    </nav>

    <div class="batalhas-container">
        <h1>Todas as Batalhas da Liga</h1>
        <p style="text-align: center; color: #b0b0b0;">
            Clique em um card para ver mais detalhes da batalha.
        </p>

        <div class="filters">
            <select id="filtro-dia">
                <option value="">Filtrar por Dia</option>
            </select>
            <select id="filtro-cidade">
                <option value="">Filtrar por Cidade</option>
            </select>
            <button id="limpar-filtros">Limpar Filtros</button>
        </div>

        <div class="batalhas-grid" id="batalhas-grid">
        </div>
    </div>

    <footer>
        © 2025 Coalizão 016 - Todos os direitos reservados.
    </footer>

    <div id="batalha-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">&times;</span>
            <div id="modal-body">
            </div>
        </div>
    </div>

    <script src="batalhas.js"></script>
    <script>
        const batalhasGrid = document.getElementById('batalhas-grid');
        const filtroDia = document.getElementById('filtro-dia');
        const filtroCidade = document.getElementById('filtro-cidade');
        const limparFiltrosBtn = document.getElementById('limpar-filtros');
        const batalhaModal = document.getElementById('batalha-modal');
        const modalBody = document.getElementById('modal-body');
        const closeBtn = document.querySelector('.close-btn');

        function renderizarBatalhas(batalhasParaRenderizar) {
            batalhasGrid.innerHTML = '';
            if (batalhasParaRenderizar.length > 0) {
                batalhasParaRenderizar.forEach(batalha => {
                    const card = document.createElement('div');
                    card.className = 'batalha-card';
                    card.setAttribute('data-codigo', batalha.codigo);

                    const logoPath = `images/${batalha.codigo}.png`;
                    const imgElement = `<img src="${logoPath}" alt="Logo ${batalha.nome}" onerror="this.style.display='none'">`;

                    card.innerHTML = `
                        ${imgElement}
                        <h3>${batalha.nome}</h3>
                        <p><strong>Cidade:</strong> ${batalha.cidade}</p>
                        <p><strong>Dia:</strong> ${batalha.dia}</p>
                    `;
                    batalhasGrid.appendChild(card);
                });
            } else {
                batalhasGrid.innerHTML = '<p style="color: #b0b0b0;">Nenhuma batalha encontrada com os filtros selecionados.</p>';
            }
        }

        function popularFiltros() {
            const diasUnicos = ['Domingo', 'Segunda-feira', 'Terça-feira', 'Quarta-feira', 'Quinta-feira', 'Sexta-feira', 'Sábado'];
            const cidadesUnicas = [...new Set(batalhas.map(batalha => batalha.cidade))].sort();

            diasUnicos.forEach(dia => {
                const option = document.createElement('option');
                option.value = dia;
                option.textContent = dia;
                filtroDia.appendChild(option);
            });

            cidadesUnicas.forEach(cidade => {
                const option = document.createElement('option');
                option.value = cidade;
                option.textContent = cidade;
                filtroCidade.appendChild(option);
            });
        }

        function filtrarBatalhas() {
            const diaSelecionado = filtroDia.value;
            const cidadeSelecionada = filtroCidade.value;

            let batalhasFiltradas = batalhas.filter(batalha => {
                const filtraPorDia = diaSelecionado === '' || batalha.dia === diaSelecionado;
                const filtraPorCidade = cidadeSelecionada === '' || batalha.cidade === cidadeSelecionada;
                return filtraPorDia && filtraPorCidade;
            });
            
            // Adicionado para manter a ordem alfabética mesmo nos resultados filtrados
            batalhasFiltradas.sort((a, b) => a.nome.localeCompare(b.nome));

            renderizarBatalhas(batalhasFiltradas);
        }

        limparFiltrosBtn.addEventListener('click', () => {
            filtroDia.value = '';
            filtroCidade.value = '';
            filtrarBatalhas();
        });

        filtroDia.addEventListener('change', filtrarBatalhas);
        filtroCidade.addEventListener('change', filtrarBatalhas);

        document.addEventListener('DOMContentLoaded', () => {
            if (typeof batalhas !== 'undefined') {
                // ========== ALTERAÇÃO PRINCIPAL AQUI ==========
                // Ordena a lista de batalhas por nome em ordem alfabética antes de exibir
                batalhas.sort((a, b) => a.nome.localeCompare(b.nome));
            
                popularFiltros();
                renderizarBatalhas(batalhas); // Agora renderiza a lista já ordenada

                // Evento para abrir a modal
                batalhasGrid.addEventListener('click', (e) => {
                    const card = e.target.closest('.batalha-card');
                    if (card) {
                        const codigo = card.getAttribute('data-codigo');
                        const batalhaSelecionada = batalhas.find(b => b.codigo === codigo);
                        
                        if (batalhaSelecionada) {
                            let campeoesHistoricosHTML = '';
                            if (batalhaSelecionada.campeoes_historicos && batalhaSelecionada.campeoes_historicos.length > 0) {
                                campeoesHistoricosHTML = `<p><strong>Maiores Campeões:</strong> ${batalhaSelecionada.campeoes_historicos.join(', ')}</p>`;
                            }

                            let redesSociaisHTML = '';
                            if (batalhaSelecionada.redes_sociais_links && batalhaSelecionada.redes_sociais_links.length > 0) {
                                redesSociaisHTML = `<p><strong>Redes Sociais:</strong></p><div class="links-redes">`;
                                batalhaSelecionada.redes_sociais_links.forEach(link => {
                                    redesSociaisHTML += `<a href="${link.url}" target="_blank">${link.nome}</a>`;
                                });
                                redesSociaisHTML += `</div>`;
                            }

                            modalBody.innerHTML = `
                                <h3>${batalhaSelecionada.nome}</h3>
                                <p><strong>Cidade:</strong> ${batalhaSelecionada.cidade}</p>
                                <p><strong>Dia:</strong> ${batalhaSelecionada.dia}</p>
                                <p><strong>Descrição:</strong> ${batalhaSelecionada.descricao}</p>
                                <p><strong>Último Campeão:</strong> ${batalhaSelecionada.ultimo_campeao || 'N/A'}</p>
                                ${campeoesHistoricosHTML}
                                ${redesSociaisHTML}
                            `;
                            batalhaModal.style.display = 'block';
                        }
                    }
                });

                // Eventos para fechar a modal
                closeBtn.onclick = () => {
                    batalhaModal.style.display = 'none';
                };
                window.onclick = (event) => {
                    if (event.target === batalhaModal) {
                        batalhaModal.style.display = 'none';
                    }
                };
            } else {
                batalhasGrid.innerHTML = '<p style="color: #b0b0b0;">Não foi possível carregar os dados das batalhas.</p>';
            }
        });
    </script>
</body>
</html>