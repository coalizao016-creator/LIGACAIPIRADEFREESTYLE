<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Ranking - Coaliz√£o 016</title>
    
    <link rel="stylesheet" href="styles.css" />
    <style>
    /* Estilos gerais */
    h1, h2 { text-align: center; margin: 40px 0 20px; color: #ff8c00; }
    .ranking-container { 
        max-width: 1200px; 
        margin: 0 auto; 
        padding: 20px; 
        text-align: center; 
        transition: all 0.5s ease-in-out; 
    }
    .explicacao { background-color: #222; border-radius: 10px; padding: 30px; margin-bottom: 40px; }
    .explicacao h2 { margin-top: 0; color: #ff8c00; }
    .explicacao p { color: #ccc; line-height: 1.6; font-size: 1.1em; }
    
    /* Container Flex para Rankings */
    .rankings-row {
        display: flex;
        flex-wrap: wrap; 
        gap: 20px; 
        margin-bottom: 40px;
        justify-content: center;
    }

    @media (min-width: 850px) {
        .ranking-table-container {
            flex: 1 1 100%; 
            max-width: 900px; 
        }
    }
    @media (max-width: 849px) {
        .ranking-table-container {
            width: 100%; 
        }
    }
    
    /* Estilos do Regulamento */
    .regulamento-container { background-color: #282828; border-radius: 10px; padding: 20px; text-align: left; }
    .regulamento-container details { border: 1px solid #444; border-radius: 5px; padding: 15px; }
    .regulamento-container summary { font-weight: bold; color: #ff8c00; font-size: 1.2em; cursor: pointer; outline: none; }
    .regulamento-container .regulamento-content { margin-top: 20px; line-height: 1.7; color: #e0e0e0; }
    .regulamento-container .regulamento-content h3 { color: #fff; border-bottom: 1px solid #444; padding-bottom: 5px; margin-top: 30px; }
    .regulamento-container .regulamento-content table { width: 100%; border-collapse: collapse; margin: 20px 0; }
    .regulamento-container .regulamento-content th { background-color: #1a1a1a; color: #ff8c00; }

    /* Estilos da Tabela de Ranking */
    .ranking-table-container { 
        background-color: #282828; 
        padding: 20px; 
        border-radius: 10px; 
        transition: all 0.5s ease-in-out; 
    }
    .ranking-table-container h2 { margin-top: 0; color: #fff; }
    .ranking-table-container table { width: 100%; border-collapse: collapse; margin-top: 20px; }
    .ranking-table-container thead { background-color: #1a1a1a; }
    .ranking-table-container th { padding: 15px; color: #ff8c00; text-align: left; }
    .ranking-table-container td { padding: 12px 15px; color: #e0e0e0; text-align: left; border-top: 1px solid #333; }
    .ranking-table-container tbody tr:nth-child(even) { background-color: #222; }

    /* --- DESTAQUE VISUAL REQUERIDO --- */
    
    .ranking-table-container tbody tr:hover { 
        background-color: #383838; 
        box-shadow: 0 0 15px rgba(255, 140, 0, 0.4); 
        cursor: pointer; 
    }

    .ranking-table-container .posicao { 
        font-weight: 900; 
        font-size: 1.8em; 
        text-align: center; 
        width: 60px; 
        color: gold; 
    }

    .ranking-table-container td.mc-info { 
        text-align: left !important;
    }
    .ranking-table-container .mc-card-link {
        display: flex;
        align-items: center; 
        gap: 20px; 
        cursor: pointer;
    }
    
    .ranking-mc-img {
        width: 70px; 
        height: 70px; 
        border-radius: 50%; 
        object-fit: cover;
        border: 4px solid #ff8c00; 
    }
    .ranking-table-container .mc-nome {
        font-weight: 900; 
        color: #fff;
        font-size: 1.5em; 
        text-shadow: 0 0 5px rgba(0, 0, 0, 0.5);
    }
    
    .ranking-table-container .mc-pontos {
        font-weight: 900;
        font-size: 1.4em; 
        color: #ff8c00;
    }
    
    /* ------------------------------------- */
    /* --- ESTILOS DE TELA CHEIA (Fullscreen) --- */
    /* ------------------------------------- */
    
    /* Oculta tudo que n√£o for o ranking-container, exceto quando estiver dentro do modo fullscreen */
    .fullscreen-mode .hide-on-fullscreen {
        display: none !important;
    }
    
    /* Estilos do RankingContainer QUANDO em modo Fullscreen */
    /* *** GARANTIA DE SCROLL NO CONTAINER PRINCIPAL *** */
    .ranking-container:fullscreen, 
    .ranking-container:-webkit-full-screen, 
    .ranking-container:-ms-fullscreen {
        max-width: 100vw !important;
        margin: 0 !important;
        padding: 0 !important;
        background-color: #111; 
        min-height: 100vh;
        width: 100%;
        display: flex;
        flex-direction: column;
        justify-content: flex-start;
        align-items: center;
        overflow-y: auto !important; 
    }

    /* Ajustes da Tabela no Modo Fullscreen: For√ßa o container a ocupar a altura total */
    .ranking-container:fullscreen .ranking-table-container {
        max-width: 100% !important;
        width: 100% !important;
        margin: 0 auto;
        padding: 40px 20px;
        border-radius: 0;
        box-shadow: none;
        
        flex-grow: 1; 
        display: flex;
        flex-direction: column; 
        padding-bottom: 20px; 
    }

    /* Estilos da Tabela no Modo Fullscreen */
    .ranking-container:fullscreen #geral-ranking-table {
        /* CORRE√á√ÉO AQUI: Garante que a largura das colunas seja fixa */
        table-layout: fixed; 
        width: 100%; /* Garante que ocupe a largura total */
        display: table; /* Volta para o display de tabela para alinhamento de colunas */
        margin-top: 10px;
    }

    .ranking-container:fullscreen #geral-ranking-table thead {
        display: table; /* Volta para comportamento de tabela */
        width: 100%;
        position: sticky; 
        top: 0;
        z-index: 10;
        background-color: #1a1a1a;
    }

    .ranking-container:fullscreen #geral-ranking-table tbody {
        overflow-y: scroll; /* Scroll interno apenas no corpo da tabela */
        /* Altura da viewport - altura do cabe√ßalho fixo (thead) - altura do bot√£o de controle */
        max-height: calc(100vh - 200px); 
        display: block; /* Essencial para o max-height e overflow funcionar no tbody */
        width: 100%;
    }

    .ranking-container:fullscreen #geral-ranking-table tbody tr {
        display: table; /* Faz com que as linhas se comportem como blocos para preencher */
        width: 100%;
        box-sizing: border-box; /* Garante que o padding n√£o estoure o 100% */
    }

    /* üí• CORRE√á√ÉO DE ALINHAMENTO: Define larguras fixas e consistentes para as colunas */
    /* (Soma total deve ser 100%) */
    .ranking-container:fullscreen #geral-ranking-table th:nth-child(1),
    .ranking-container:fullscreen #geral-ranking-table td:nth-child(1) {
        width: 8%; /* Coluna # */
    }

    .ranking-container:fullscreen #geral-ranking-table th:nth-child(2),
    .ranking-container:fullscreen #geral-ranking-table td:nth-child(2) {
        width: 50%; /* Coluna MC */
    }

    .ranking-container:fullscreen #geral-ranking-table th:nth-child(3),
    .ranking-container:fullscreen #geral-ranking-table td:nth-child(3) {
        width: 14%; /* Coluna Pontos */
    }

    .ranking-container:fullscreen #geral-ranking-table th:nth-child(4),
    .ranking-container:fullscreen #geral-ranking-table td:nth-child(4) {
        width: 14%; /* Coluna Twolala */
    }

    .ranking-container:fullscreen #geral-ranking-table th:nth-child(5),
    .ranking-container:fullscreen #geral-ranking-table td:nth-child(5) {
        width: 14%; /* Coluna Viagem */
    }


    /* Bot√£o de Controle de Tela Cheia */
    .fullscreen-control-bar {
        text-align: right;
        margin-bottom: 15px;
        max-width: 900px;
        margin-left: auto;
        margin-right: auto;
    }
    .ranking-container:fullscreen .fullscreen-control-bar {
        text-align: center;
        width: 100%;
        padding: 20px;
        max-width: none;
        background-color: #1a1a1a;
        margin-bottom: 0;
    }
    .fullscreen-control-bar button {
        background-color: #ff8c00;
        color: #1a1a1a;
        border: none;
        padding: 10px 15px;
        border-radius: 5px;
        cursor: pointer;
        font-weight: bold;
        transition: background-color 0.3s;
    }
    .fullscreen-control-bar button:hover {
        background-color: #e67300;
    }


    /* 5. Responsividade (Oculta b√¥nus em mobile) */
    @media (max-width: 650px) {
        .ranking-table-container th:nth-child(4),
        .ranking-table-container td:nth-child(4),
        .ranking-table-container th:nth-child(5),
        .ranking-table-container td:nth-child(5) {
            display: none;
        }
        .ranking-mc-img {
            width: 50px; 
            height: 50px; 
        }
        .ranking-table-container .mc-nome {
            font-size: 1.2em; 
        }
    }
    
    /* Estilos da Modal (Mantido) */
    .modal { display: none; position: fixed; z-index: 100; left: 0; top: 0; width: 100%; height: 100%; overflow: auto; background-color: rgba(0,0,0,0.8); padding-top: 60px; }
    .modal-content { background-color: #282828; margin: 5% auto; padding: 30px; border: 1px solid #444; width: 80%; max-width: 600px; border-radius: 10px; position: relative; animation-name: animatetop; animation-duration: 0.4s; text-align: center;}
    .modal-content h3 { color: #ff8c00; font-size: 2.2em; margin-top: 0; margin-bottom: 10px; }
    .modal-content p { color: #e0e0e0; text-align: center; margin-bottom: 10px; font-size: 1.1em; }
    .modal-content .mc-modal-links { margin-top: 20px; display: flex; flex-wrap: wrap; gap: 10px; justify-content: center; }
    .modal-content .mc-modal-links a { padding: 8px 15px; background-color: #ff8c00; color: #fff; text-decoration: none; border-radius: 5px; font-weight: bold; transition: background-color 0.3s; }
    .modal-content .mc-modal-links a:hover { background-color: #e67300; }
    .close-btn { color: #aaa; position: absolute; top: 10px; right: 20px; font-size: 28px; font-weight: bold; cursor: pointer; transition: color 0.3s; }
    .close-btn:hover { color: #fff; }
    @keyframes animatetop { from {top:-300px; opacity:0} to {top:0; opacity:1} }
    .modal-img { width: 150px; height: 150px; border-radius: 50%; object-fit: cover; border: 4px solid #ff8c00; margin-bottom: 20px; }
    .modal-stats-container { text-align: left; margin-top: 15px; }
    .stats-group { margin: 10px 0; }
    .stats-title { font-weight: bold; color: #ff8c00; font-size: 1.1em; margin: 0 0 8px 0; }
    .stats-item { color: #ccc; margin: 4px 0 4px 15px; }
    .stats-separator { border: 0; height: 1px; background-color: #444; margin: 15px 0; }
    .modal-stats-footer { color: #aaa; font-style: italic; margin-top: 20px; text-align: center; font-size: 0.9em; }
</style>
</head>
<body id="page-body">
    
    <header class="hide-on-fullscreen">
    </header>

    <nav class="hide-on-fullscreen">
        <div class="hamburger">
            <div class="bar"></div>
            <div class="bar"></div>
            <div class="bar"></div>
        </div>
        <div class="nav-links">
            <a href='/'>In√≠cio</a>
            <a href='/batalhas'>Batalhas</a>
            <a href='/mcs'>MC's</a>
            <a href='/mapaindex'>Mapa</a>
            <a href='/ranking'><strong>Ranking</strong></a>
            <div class="dropdown">
                <a href="#" class="dropdown-label">Nossas Redes</a>
                <div class="dropdown-content">
                    <a href="https://www.instagram.com/coalizao016/" target="_blank">Instagram</a>
                    <a href="https://www.tiktok.com/@coalizao016?lang=pt-BR" target="_blank">TikTok</a>
                    <a href="https://www.youtube.com/@Coaliz%C3%A3o016" target="_blank">YouTube</a>
                    <a href="https://linktr.ee/coalizao016" target="_blank">Fotos</a>
                </div>
            </div>
        </div>
    </nav>
    
    <div class="ranking-container">
        <h1 class="hide-on-fullscreen">Ranking Oficial da Liga</h1>
        
        <div class="explicacao hide-on-fullscreen">
            <h2>A Liga Come√ßou!</h2>
            <p>
                A Liga Caipira de Freestyle est√° no ar! A partir de agora, esta p√°gina ser√° atualizada regularmente com a pontua√ß√£o e as estat√≠sticas de todos os MCs, com a precis√£o do <strong>TwolalaScore</strong>. Fique de olho para acompanhar a nova fase do Freestyle do interior!
            </p>
        </div>

        <div class="fullscreen-control-bar">
            <button id="fullscreen-toggle-btn">Visualizar em Tela Cheia</button>
        </div>

        <div class="rankings-row">
            
            <div class="ranking-table-container" id="geral-ranking-container">
                <h2 class="hide-on-fullscreen">Ranking Geral (Temporada)</h2>
                <p class="hide-on-fullscreen" style="color: #ff8c00; font-weight: bold; margin-bottom: 20px; font-size: 0.9em; margin-top: -10px;">Total de pontos conquistados entre 01/10 a 15/12.</p>
                <table id="geral-ranking-table">
                    <thead>
                        <tr>
                            <th class="posicao">#</th>
                            <th class="mc-info">MC</th> 
                            <th class="mc-pontos" style="text-align: right;">Pontos</th>
                            <th style="text-align: right;">B√¥nus Twolala</th>
                            <th style="text-align: right;">B√¥nus Viagem</th>
                        </tr>
                    </thead>
                    <tbody id="geral-ranking-body">
                        </tbody>
                </table>
            </div>
        </div>
        
        <div class="regulamento-container hide-on-fullscreen">
            <details>
                <summary>Clique para ver o Regulamento Completo (v1.2)</summary>
                <div class="regulamento-content">
                    <h3>1) Objetivo</h3>
                    <p>Criar um sistema de ranking cont√≠nuo e justo para os MCs do interior paulista, que gere um calend√°rio competitivo, integre batalhas parceiras, equilibre a disputa entre cidades e garanta total transpar√™ncia. O sistema busca consolidar a Liga Caipira como refer√™ncia regional em freestyle.</p>
                    
                    <h3>11) Transpar√™ncia & Comunica√ß√£o</h3>
                    <p>Ser√£o divulgados dois rankings: o **Ranking da Janela** (desempenho quinzenal) e o **Ranking Geral** (acumulado da temporada). As batalhas parceiras devem informar a realiza√ß√£o de suas etapas at√© a sexta-feira anterior √† semana do evento.</p>
                </div>
            </details>
        </div>
        </div>
    
    <footer class="hide-on-fullscreen">
        ¬© 2025 Coaliz√£o 016 - Todos os direitos reservados.
    </footer>

    <div id="mc-modal" class="modal">
        <div class="modal-content">
            <span class="close-btn">√ó</span>
            <div id="modal-body-mc">
                </div>
        </div>
    </div>
    
    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

    <script src="mcs.js"></script>

    <script src="ranking.js"></script>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const body = document.getElementById('page-body');
            const rankingContainer = document.querySelector('.ranking-container'); 
            const fullscreenBtn = document.getElementById('fullscreen-toggle-btn');
            const toggleText = "Visualizar em Tela Cheia";
            const exitText = "Sair da Tela Cheia (ESC)";

            fullscreenBtn.textContent = toggleText;

            // Fun√ß√£o para entrar no modo tela cheia
            function enterFullscreen() {
                if (rankingContainer.requestFullscreen) {
                    rankingContainer.requestFullscreen();
                } else if (rankingContainer.webkitRequestFullscreen) { /* Safari */
                    rankingContainer.webkitRequestFullscreen();
                } else if (rankingContainer.msRequestFullscreen) { /* IE11 */
                    rankingContainer.msRequestFullscreen();
                }
            }

            // Fun√ß√£o para sair do modo tela cheia
            function exitFullscreen() {
                if (document.exitFullscreen) {
                    document.exitFullscreen();
                } else if (document.webkitExitFullscreen) { /* Safari */
                    document.webkitExitFullscreen();
                } else if (document.msExitFullscreen) { /* IE11 */
                    document.msExitFullscreen();
                }
            }

            fullscreenBtn.addEventListener('click', () => {
                // Checa se j√° estamos em fullscreen
                if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                    exitFullscreen();
                } else {
                    enterFullscreen();
                }
            });

            // Event listener nativo do navegador para detectar mudan√ßa de modo
            document.addEventListener('fullscreenchange', handleFullscreenChange);
            document.addEventListener('webkitfullscreenchange', handleFullscreenChange);
            document.addEventListener('msfullscreenchange', handleFullscreenChange);

            function handleFullscreenChange() {
                // Se o navegador est√° em modo Fullscreen, adiciona a classe CSS
                if (document.fullscreenElement || document.webkitFullscreenElement || document.msFullscreenElement) {
                    body.classList.add('fullscreen-mode');
                    fullscreenBtn.textContent = exitText;
                } else {
                    // Se saiu do modo Fullscreen, remove a classe CSS
                    body.classList.remove('fullscreen-mode');
                    fullscreenBtn.textContent = toggleText;
                }
            }
            
            // L√≥gica Hamburger Menu (mantida)
            const hamburger = document.querySelector(".hamburger");
            const navLinks = document.querySelector(".nav-links");
            if (hamburger && navLinks) {
                hamburger.addEventListener("click", () => navLinks.classList.toggle("active"));
            }
        });
    </script>

</body>
</html>